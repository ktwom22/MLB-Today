<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MLB Optimizer</title>
    <!-- Link to the favicon using Flask's url_for function -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <!-- Link to the CSS using Flask's url_for function -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- Bootstrap CSS via CDN (you can keep it or use local) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light text-dark">
    <div class="container py-5">
        <h1 class="text-center mb-4">âš¾ MLB DFS Lineup Optimizer</h1>

        <!-- Form to input lineup data -->
        <form class="row g-3 mb-4" method="get">
            <div class="col-md-3">
                <label class="form-label">Lineups to Generate</label>
                <input type="number" class="form-control" name="count" value="{{ count or 5 }}">
            </div>
            <div class="col-md-3">
                <label class="form-label">Stack Team (optional)</label>
                <input type="text" class="form-control" name="team" value="{{ stack_team or '' }}">
            </div>
            <div class="col-md-3">
                <label class="form-label">Stack Size</label>
                <input type="number" class="form-control" name="stack" value="{{ stack_size or 0 }}">
            </div>
            <div class="col-md-3">
                <label class="form-label">Max Exposure (%)</label>
                <input type="number" class="form-control" name="exposure" value="{{ exposure_pct or 100 }}">
            </div>
            <div class="col-12 text-center">
                <button type="submit" class="btn btn-success mt-3">Generate Lineups</button>
            </div>
        </form>

        <!-- Show error message if any -->
        {% if error %}
            <div class="alert alert-danger text-center">
                <strong>Error:</strong> {{ error }}
            </div>
        {% endif %}

        {% if prompt %}
            <div class="alert alert-info text-center">
                Use the form above to generate lineups.
            </div>
        {% endif %}

        <!-- Display generated lineups -->
        {% if lineups %}
            <h2 class="mb-4">Generated Lineups</h2>
            <div class="row row-cols-1 row-cols-md-2 g-4">
                {% for lineup in lineups %}
                    <div class="col">
                        <div class="card shadow-sm">
                            <div class="card-header bg-primary text-white">
                                <strong>Projected Points:</strong> {{ lineup.points }} |
                                <strong>Salary:</strong> ${{ lineup.salary }}
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush">
                                    {% for player in lineup.players %}
                                        <li class="list-group-item">
                                            <strong>{{ player.Position }}</strong> - {{ player.Name }}
                                            ({{ player.Team }}) - ${{ player.Salary }} - {{ player.Points }} pts
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>

    <!-- Bootstrap JS (optional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
